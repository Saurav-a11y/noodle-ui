'use client';
import { useCommodityOverview } from "@/hooks/useCommodities";
import OilIcon from "@/icons/commodities/OilIcon";
import { useParams } from "next/navigation";

export const CommodityHeader = () => {
	const params = useParams();
	const slug = params?.slug as string;
	const { isFetching, data } = useCommodityOverview(slug);
	const commodityOverview = data?.data || {};

	return (
		<div className="flex items-center gap-4">
			<div className="w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-xl">
				{isFetching ? (
					<div className="w-10 h-10 bg-gray-200 dark:bg-[#333] rounded-full animate-pulse" />
				) : (
					<div className="w-10 h-10 flex items-center justify-center font-noto bg-white rounded-full">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="17" viewBox="0 0 16 17" fill="none">
							<g clipPath="url(#clip0_3271_34205)">
								<path d="M0.00390625 14.8794C0.00390625 11.3485 0.00390625 7.81753 0.00390625 4.2866C0.0122546 4.26782 0.0247771 4.25029 0.0285338 4.23067C0.200927 3.34909 0.871716 2.78724 1.76415 2.78641C3.71182 2.78432 5.6599 2.78641 7.60757 2.78516C7.95778 2.78516 8.265 2.89327 8.51295 3.13996C9.45464 4.07623 10.393 5.01583 11.3305 5.95627C11.5814 6.20797 11.6983 6.51686 11.6949 6.87334C11.6916 7.2536 11.6941 7.63345 11.6941 8.01372C11.6941 10.211 11.6953 12.4087 11.6937 14.606C11.6928 15.4158 11.2237 16.0728 10.4903 16.2994C10.3917 16.3299 10.2911 16.3529 10.1918 16.3796H1.5041C1.47572 16.3696 1.44775 16.3562 1.41811 16.3504C0.916797 16.2535 0.518581 15.9951 0.264374 15.5543C0.145411 15.3481 0.0886419 15.1056 0.00390625 14.8794ZM3.83788 11.4557C3.83788 11.8565 3.84289 12.2572 3.83371 12.6579C3.83204 12.7355 3.79196 12.829 3.73812 12.8862C3.52106 13.1179 3.29106 13.337 3.06816 13.5629C2.85778 13.7762 2.84651 14.0683 3.03769 14.2583C3.2297 14.4482 3.51856 14.4348 3.73353 14.2228C3.95976 13.9999 4.17974 13.7707 4.41016 13.5524C4.46066 13.5044 4.54248 13.4643 4.60968 13.4635C5.43742 13.4577 6.26516 13.4577 7.0929 13.4631C7.15676 13.4631 7.23482 13.4973 7.28157 13.542C7.5149 13.7645 7.73906 13.9974 7.96905 14.2236C8.18361 14.4348 8.47454 14.4474 8.66489 14.2574C8.85648 14.0663 8.84479 13.7766 8.63275 13.5616C8.40609 13.332 8.17359 13.1079 7.9511 12.8745C7.90644 12.8278 7.87096 12.7501 7.87054 12.6867C7.86512 11.8594 7.86512 11.0316 7.87054 10.2043C7.87096 10.1367 7.91145 10.0549 7.95903 10.0048C8.17776 9.7748 8.40651 9.5544 8.62982 9.32858C8.84312 9.11278 8.85732 8.82518 8.66823 8.63275C8.47955 8.44115 8.18569 8.45075 7.97239 8.66071C7.74615 8.8832 7.52701 9.11403 7.29534 9.33067C7.23816 9.3841 7.14424 9.42459 7.06702 9.42542C6.25514 9.4321 5.44285 9.4321 4.63097 9.42542C4.55417 9.42459 4.4615 9.38118 4.4039 9.32775C4.17599 9.11445 3.96018 8.88821 3.73812 8.66864C3.51772 8.45117 3.22261 8.43865 3.03143 8.63609C2.84484 8.82935 2.86154 9.11528 3.07526 9.3315C3.29858 9.55732 3.52816 9.77689 3.74563 10.0081C3.79614 10.0616 3.83287 10.1501 3.83412 10.2235C3.84247 10.6347 3.8383 11.0458 3.8383 11.457L3.83788 11.4557ZM9.20127 6.50643C9.18958 6.47595 9.18874 6.46427 9.18248 6.45801C8.60186 5.87613 8.02123 5.29383 7.43768 4.71487C7.40554 4.68315 7.3471 4.6627 7.30119 4.6627C5.7868 4.66061 4.27241 4.65685 2.75802 4.66437C2.29052 4.66645 1.90107 5.06843 1.88103 5.5351C1.85724 6.07816 2.27257 6.50517 2.83399 6.50559C4.92066 6.50726 7.00774 6.50643 9.09441 6.50643C9.1253 6.50643 9.15619 6.50643 9.20168 6.50643H9.20127Z" fill="black" />
								<path d="M12.5895 3.22031C12.1421 2.77284 11.7088 2.33956 11.2646 1.89585C11.2822 1.87707 11.3039 1.85119 11.3281 1.82698C11.7472 1.40789 12.1684 0.990473 12.5849 0.568465C12.7135 0.438648 12.8596 0.37687 13.0437 0.378957C13.522 0.384384 14.0008 0.38021 14.4792 0.381044C14.8139 0.381879 15.0026 0.568465 15.0047 0.899893C15.006 1.06102 15.0085 1.22256 15.0039 1.38326C14.9959 1.64957 14.8023 1.84033 14.5368 1.84993C14.5263 1.84993 14.5155 1.8516 14.5055 1.84993C14.1027 1.77563 13.8142 1.93717 13.5529 2.24314C13.2566 2.59001 12.913 2.89598 12.5895 3.22031Z" fill="black" />
								<path d="M14.8279 8.22309C14.0126 8.22017 13.4533 7.40913 13.7509 6.65235C13.9354 6.18276 14.2297 5.77786 14.544 5.38966C14.6955 5.20266 14.966 5.20016 15.1188 5.38632C15.436 5.77285 15.7278 6.179 15.914 6.64776C16.2166 7.40996 15.651 8.22601 14.8279 8.22309Z" fill="black" />
								<path d="M9.37891 2.6552C9.48994 2.55043 9.60097 2.44065 9.71701 2.3363C9.90276 2.16891 10.1758 2.16307 10.3544 2.33964C10.9551 2.93237 11.5516 3.52844 12.1443 4.1291C12.3117 4.29899 12.3142 4.5628 12.1606 4.74229C12.0529 4.86793 11.9302 4.98147 11.8195 5.09501C11.0068 4.28271 10.2041 3.48044 9.37891 2.6552Z" fill="black" />
								<path d="M4.78516 10.377H6.91899V12.5108H4.78516V10.377Z" fill="black" />
							</g>
							<defs>
								<clipPath id="clip0_3271_34205">
									<rect width="15.9925" height="16" fill="white" transform="translate(0.00390625 0.378906)" />
								</clipPath>
							</defs>
						</svg>
					</div>
				)
				}
			</div>
			<div className="text-[#4B4A4A] dark:text-[#FFF] flex flex-col gap-1">
				<h1 className="text-xl font-semibold font-noto">
					{isFetching ? (
						<span className="inline-block w-36 h-5 bg-gray-200 dark:bg-[#333] rounded-md animate-pulse" />
					) : (
						<span>{commodityOverview.name}</span>
					)}
				</h1>
				<div className="flex items-center gap-2 text-sm">
					{isFetching ? (
						<>
							<span className="w-12 h-4 bg-gray-200 dark:bg-[#333] rounded animate-pulse" />
							<span>•</span>
							<span className="w-16 h-4 bg-gray-200 dark:bg-[#333] rounded animate-pulse" />
							<span>•</span>
							<span className="w-12 h-4 bg-gray-200 dark:bg-[#333] rounded animate-pulse" />
						</>
					) : (
						<>
							<span className="opacity-50 dark:opacity-100 text-xs font-medium font-noto">${commodityOverview.price}</span>
							<span>•</span>
							<span className="opacity-50 dark:opacity-100 text-xs font-medium font-noto">{commodityOverview.unit}</span>
							<span>•</span>
							<span className="text-xs font-medium text-red-500 font-noto">{commodityOverview.percent}</span>
						</>
					)}
				</div>
			</div>
		</div>
	);
};